#! /usr/bin/env ruby

# This adds our lib subdirectory to the ruby load path
$LOAD_PATH.unshift File.dirname(__FILE__) + '/../lib'

require 'erbtex'
require 'ruby-debug'

progname = File.basename($0)
commandline = progname
ARGV.each do |a|
  if a =~ /\s/
    a = "'" + a + "'"
  end
  commandline += " #{a}"
end

verbose = false
if verbose
  puts "Program name: #{progname}"
  puts "Command line: #{commandline}"
  puts 'ARGV:'
  ARGV.each do |a|
    puts "Argument: #{a}"
  end
  puts 'PATH:'
  ENV['PATH'].split(':').each do |p|
    puts p
  end
  puts "Executable: "
  puts ErbTeX.find_executable($0)
end

puts ErbTeX.run(commandline)
